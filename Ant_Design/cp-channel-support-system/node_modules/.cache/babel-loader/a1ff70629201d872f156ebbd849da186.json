{"ast":null,"code":"import \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport _classCallCheck from \"/Users/wanghaojie/Ant_Design/cp-channel-support-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wanghaojie/Ant_Design/cp-channel-support-system/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport JsonP from 'jsonp';\nimport axios from 'axios';\nimport Utils from '../utils/utils';\n\nvar Axios =\n/*#__PURE__*/\nfunction () {\n  function Axios() {\n    _classCallCheck(this, Axios);\n  }\n\n  _createClass(Axios, null, [{\n    key: \"requestList\",\n    value: function requestList(_this, url, params, isMock) {\n      var data = {\n        params: params,\n        isMock: isMock\n      };\n      this.ajax({\n        url: url,\n        data: data\n      }).then(function (data) {\n        if (data && data.result) {\n          var list = data.result.itemList.map(function (item, index) {\n            item.key = index;\n            return item;\n          });\n\n          _this.setState({\n            list: list,\n            pagination: Utils.pagination(data, function (current, pageSize) {\n              _this.params.page = current;\n              _this.params.pageSize = pageSize;\n\n              _this.requestList();\n            }, function (current, pageSize) {\n              _this.params.page = current;\n              _this.params.pageSize = pageSize;\n\n              _this.requestList();\n            })\n          });\n        }\n      });\n    }\n  }, {\n    key: \"jsonp\",\n    value: function jsonp(options) {\n      return new Promise(function (resolve, reject) {\n        JsonP(options.url, {\n          param: 'callback'\n        }, function (err, response) {\n          if (response.status == 'success') {\n            resolve(response);\n          } else {\n            reject(response.messsage);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"ajax\",\n    value: function ajax(options) {\n      var loading;\n\n      if (options.data && options.data.isShowLoading !== false) {\n        loading = document.getElementById('ajaxLoading');\n        loading.style.display = 'block';\n      }\n\n      var baseApi = '';\n\n      if (options.isMock) {\n        baseApi = 'https://www.easy-mock.com/mock/5c890a257e5d22324dcefbbe/example';\n      } else {\n        baseApi = 'https://www.easy-mock.com/mock/5c890a257e5d22324dcefbbe/example';\n      }\n\n      return new Promise(function (resolve, reject) {\n        axios({\n          url: options.url,\n          method: 'get',\n          baseURL: baseApi,\n          timeout: 5000,\n          params: options.data && options.data.params || ''\n        }).then(function (response) {\n          if (options.data && options.data.isShowLoading !== false) {\n            loading = document.getElementById('ajaxLoading');\n            loading.style.display = 'none';\n          }\n\n          if (response.status == '200') {\n            var res = response.data;\n\n            if (res.code == '0') {\n              resolve(res);\n            } else {\n              _Modal.info({\n                title: \"提示\",\n                content: res.msg\n              });\n            }\n          } else {\n            reject(response.data);\n          }\n        });\n      });\n    }\n  }]);\n\n  return Axios;\n}();\n\nexport { Axios as default };","map":{"version":3,"sources":["/Users/wanghaojie/Ant_Design/cp-channel-support-system/src/axios/index.js"],"names":["JsonP","axios","Utils","Axios","_this","url","params","isMock","data","ajax","then","result","list","itemList","map","item","index","key","setState","pagination","current","pageSize","page","requestList","options","Promise","resolve","reject","param","err","response","status","messsage","loading","isShowLoading","document","getElementById","style","display","baseApi","method","baseURL","timeout","res","code","info","title","content","msg"],"mappings":"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","sourcesContent":["import JsonP from 'jsonp'\nimport axios from 'axios'\nimport { Modal } from 'antd'\nimport Utils from '../utils/utils'\nexport default class Axios {\n\n    static requestList(_this,url,params,isMock){\n        var data = {\n            params: params,\n            isMock\n        }\n        this.ajax({\n            url,\n            data\n        }).then((data)=>{\n       \n            if (data && data.result){\n                let list = data.result.itemList.map((item, index) => {\n                    item.key = index;\n                    return item;\n                });\n              \n                _this.setState({\n                    list,\n                    pagination: Utils.pagination(data, (current,pageSize) => {\n                        _this.params.page = current;\n                        _this.params.pageSize = pageSize;\n                        _this.requestList();\n                    },(current,pageSize) => {\n                        _this.params.page = current;\n                        _this.params.pageSize = pageSize;\n                        _this.requestList();\n                    })\n                })\n            }\n        });\n    }\n    static jsonp(options) {\n        return new Promise((resolve, reject) => {\n            JsonP(options.url, {\n                param: 'callback'\n            }, function (err, response) {\n                if (response.status == 'success') {\n                    resolve(response);\n                } else {\n                    reject(response.messsage);\n                }\n            })\n        })\n    }\n\n    static ajax(options){\n        let loading;\n        if (options.data && options.data.isShowLoading !== false){\n            loading = document.getElementById('ajaxLoading');\n            loading.style.display = 'block';\n        }\n        let baseApi = '';\n        if(options.isMock){\n            baseApi = 'https://www.easy-mock.com/mock/5c890a257e5d22324dcefbbe/example';\n        }else{\n            baseApi = 'https://www.easy-mock.com/mock/5c890a257e5d22324dcefbbe/example';\n        }\n        return new Promise((resolve,reject)=>{\n            axios({\n                url:options.url,\n                method:'get',\n                baseURL:baseApi,\n                timeout:5000,\n                params: (options.data && options.data.params) || ''\n            }).then((response)=>{\n                if (options.data && options.data.isShowLoading !== false) {\n                    loading = document.getElementById('ajaxLoading');\n                    loading.style.display = 'none';\n                }\n                if (response.status == '200'){\n                    let res = response.data;\n                    if (res.code == '0'){\n                        resolve(res);\n                    }else{\n                        Modal.info({\n                            title:\"提示\",\n                            content:res.msg\n                        })\n                    }\n                }else{\n                    reject(response.data);\n                }\n            })\n        });\n    }\n}"]},"metadata":{},"sourceType":"module"}